<!DOCTYPE html>

<html>

<head>
	<meta charset="utf-8" />
	<meta name="author" content="II-Matto" />
    <meta name="description" content="II-Matto's Blog" />

	<title>Perl Tip Box | II-Matto</title>

	<link rel="stylesheet" href="/css/default.css" />

	<link rel="stylesheet" href="/css/google-code-prettify/prettify.css" />
	<link rel="stylesheet" href="/css/google-code-prettify/sons-of-obsidian.css" />

	<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

	
</head>

<body>
	<img id="tsuna" src="/img/tsuna.png" />

	<nav id="site-nav">
		<ul>
			<li><a href="/">这是首页</a></li>
			<li><a href="/index/notes.html">笔记</a></li>
			<li><a href="/index/box.html">储物间</a></li>
			<li><a href="/index/news.html">黑板报</a></li>
			<li><a href="/index/bookmarks.html">一点痕迹</a></li>
			<li><a href="/index/private.html">灵境</a></li>
		</ul>
	</nav>

	<div id="content-wrapper">
		<link rel="stylesheet" href="/css/post.css" />

<article id="post">
	<header>
		<h1><a href="/blog/Note/20130519-perl-tips.html" title="Perl Tip Box">Perl Tip Box</a></h1>
		<p>2013-05-19</p>
	</header>

	<p><a href="http://en.wikipedia.org/wiki/Perl" title="Perl - Wikipedia, the free encyclopedia">Perl </a>=<span class="text-en"><strong>P</strong>ractical <strong>E</strong>xtraction and <strong>R</strong>eport <strong>L</strong>anguage</span></p>

<ul>
  <li><a href="http://www.perl.org/" title="The Perl Programming Language">The Perl Programming Language</a></li>
  <li><a href="http://www.perl.com/" title="Perl.com - news and views of the perl programming language">Perl.com</a></li>
  <li><a href="http://perldoc.perl.org/" title="Perl Programming Documentation">Perl Programming Documentation</a></li>
</ul>

<h3 id="section">0. 基本用法</h3>

<p>变量声明：<code> my </code>后面接<code> $variable_name </code>，变量引用都以美元符号<code> $ </code>开始。</p>

<p>运算符：<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code>、<code>++</code>，以及<code> +=</code>，其它类似。</p>

<p><code> if </code>语句：可以把<code> if </code>放在前面或者后面，另外还有<code> while </code>和<code> for </code>语句。</p>

<pre><code>$flag = 1 if $count &gt; 100;

if ($count &gt; 100) {
	$flag = 1;
}

while ($i &lt; 100) {
	$i++;
}

for (my $i = 0; $i &lt; 100; $i++) {
	print "$i", "\n"
}
</code></pre>

<h3 id="section-1">1. 文件读取</h3>

<p>最基本的操作就是打开一个文件，逐行读取并进行相关的处理。</p>

<pre><code>open my($file_handle), '&lt;', "C:/path/of/the/file.txt" or die "File open failure: $!.\n";
my $line;
while (defined($line = &lt;$url_fh&gt;)) {
	$line =~ s/\n//g; # 将读取的这一行末尾的换行符去掉
	print "$line"; # 对这一行进行处理
}
close $file_handle; # 文件使用完之后，记得关闭
</code></pre>

<p style="text-indent: 0em">这种逐行处理可能用到的场景包括：</p>

<ol>
  <li>
    <p>读取一个文本词典文件，每一行包括一个单词：读取之后去掉换行符，然后加入到哈希表中，可以方便地进行查找。</p>
  </li>
  <li>
    <p>读取一组图像的标注，每一行对应于一张图片的标签，标签之间通过空格（或者其它分隔符，如逗号）分开：没读取一行之后，可以利用<code> split </code>函数将各个标签分离出来形成一个数组，如</p>

    <pre><code> my @tags = split(/\s+/, $line);
</code></pre>
  </li>
  <li>
    <p>读取一组文件路径，每一行包括一个文件的路径：读取之后去掉换行符，就可以通过路径来读取对应的文件了。</p>
  </li>
</ol>

<h3 id="section-2">2. 数组</h3>

<p>创建一个指定大小的数组，并且将元素值均初始化为<span class="text-en">0</span>：</p>

<pre><code>my $array_size = 100;
my @array = (0) x $array_size;
</code></pre>

<p style="text-indent:0em">注意第2行代码中确实使用小写字母“<span class="text-en">x</span>”来表示“乘法”，而不是用星号（<span class="text-en">*</span>）</p>

<ul>
  <li>
    <p>获取一个数组的长度：<code> my $array_size = @array;</code></p>
  </li>
  <li>
    <p>访问数组的第<code> $i </code>个元素，用中括号：<code> $array[$i]</code></p>
  </li>
</ul>

<h3 id="section-3">3. 哈希表</h3>

<p>按照键值的升序或者降序来遍历哈希表（下面用到了<code> foreach </code>语句）：</p>

<pre><code># 按键值的升序遍历
foreach (sort {$hash{$a} &lt;=&gt; $hash{$b}} keys %hash) {
 	print "$_: $hash{$_}\n";
}
</code></pre>

<p style="text-indent:0em">如果是字符串比较，需要把<code> &lt;=&gt; </code>替换成<code> cmp </code>。如果需要按照降序遍历，则调换<code> $a </code>和<code> $b </code>的位置即可。</p>

<h3 id="section-4">4. 其它</h3>

<p>&lt;计时&gt; 利用<code> time() </code>函数。</p>

<pre><code>use Time::Local; # 不要忘了加上这一行！
$my start_time = time();

# do something

$my elapsed_time = time() - $start_time;
# print "Elapsed time: ", time() - $start_time . " seconds\n";
</code></pre>



	<footer>
		<hr />
		<p>Thanks for your time :-)</p>
	</footer>
</article>

	</div>

	<!--
	<div id="copyright">
		
			<p>Designed by <a href="http://ii-matto.github.com/about" title="II-Matto" target="_blank">II-Matto</a> &copy; 2013</p>
		
	</div>
	-->

	<script src="/js/jquery-1.9.1.min.js"></script>
<!-- Google CDN for jQuery
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
-->

	<script src="/js/default.js"></script>

	<script src="/css/google-code-prettify/prettify.js"></script>
<!--
	<script src="/css/google-code-prettify/run_prettify.js?autoload=true&amp;lang=css&amp;skin=sons-of-obsidian"></script>
-->
<!-- Google CDN for Prettify
	<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css&skin=sunburst"></script>
-->
</body>

</html>
